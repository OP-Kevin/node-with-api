<!DOCTYPE html>
<html lang="en">

<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css" rel="stylesheet" />
  <!-- Include SweetAlert2 from npm -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <h2 class="bg-success text-white p-2 rounded">List of Employees</h2>
      <a class="btn btn-primary" href="/new_emp">Add New Employee</a>
    </div>
    <table class="table table-bordered table-striped">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Age</th>
        <th>City</th>
        <th>Action</th>
      </tr>
      <% emps.forEach(emp=> { %>
        <tr>
          <td>
            <%= emp.eid %>
          </td>
          <td>
            <%= emp.ename %>
          </td>
          <td>
            <%= emp.age %>
          </td>
          <td>
            <%= emp.city %>
          </td>
          <td>
            <a class="btn btn-success " href="/update_emp/<%= emp._id %>"><i class="fa fa-edit"></i></a>
            <a class="btn btn-danger" href="/delete_emp/<%= emp._id %>"><i class="fa fa-trash"></i></button>
          </td>
        </tr>
        <% }) %>
    </table>
  </div>
  <script>
    /*async function deleteEmployee(empId) {
      // Show confirmation dialog
      Swal.fire({
            title: "Are you sure?",
            text: "You won't be able to revert this!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#d33",
            cancelButtonColor: "#3085d6",
            confirmButtonText: "Yes, delete it!"
        }).then((result) => {
            if (result.isConfirmed) {
                // Call the backend to delete the employee
                fetch(`/delete_emp/${empId}`, {
                    method: "DELETE"
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire("Deleted!", data.message, "success");
                        location.reload(); // Refresh after deletion
                    } else {
                        Swal.fire("Error!", data.message, "error");
                    }
                })
                .catch(error => {
                    Swal.fire("Error!", "Something went wrong", "error");
                    console.error("Error:", error);
                });
            }
        });
    }*/
  </script>
</body>

</html>